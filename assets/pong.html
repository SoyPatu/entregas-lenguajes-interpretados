<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pong en la Web</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: black;
      margin: 0;
    }
    canvas {
      border: 2px solid white;
    }
  </style>
</head>
<body>
  <canvas id="pong" width="800" height="500"></canvas>

  <script>
    const canvas = document.getElementById("pong");
    const ctx = canvas.getContext("2d");

    // Jugadores y pelota
    const paddleWidth = 10, paddleHeight = 100;
    const player = { x: 0, y: canvas.height/2 - paddleHeight/2, width: paddleWidth, height: paddleHeight, color: "white", score: 0 };
    const computer = { x: canvas.width - paddleWidth, y: canvas.height/2 - paddleHeight/2, width: paddleWidth, height: paddleHeight, color: "white", score: 0 };
    const ball = { x: canvas.width/2, y: canvas.height/2, radius: 10, speed: 5, velocityX: 5, velocityY: 5, color: "white" };

    // Dibujar rectángulos
    function drawRect(x,y,w,h,color){
      ctx.fillStyle = color;
      ctx.fillRect(x,y,w,h);
    }

    // Dibujar círculo
    function drawCircle(x,y,r,color){
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x,y,r,0,Math.PI*2,false);
      ctx.closePath();
      ctx.fill();
    }

    // Dibujar texto
    function drawText(text,x,y,color){
      ctx.fillStyle = color;
      ctx.font = "35px Arial";
      ctx.fillText(text,x,y);
    }

    // Control jugador
    document.addEventListener("keydown", event => {
      if(event.key === "w") player.y -= 30;
      if(event.key === "s") player.y += 30;
    });

    // Colisión pelota con paleta
    function collision(b,p){
      return b.x - b.radius < p.x + p.width &&
             b.x + b.radius > p.x &&
             b.y - b.radius < p.y + p.height &&
             b.y + b.radius > p.y;
    }

    // Reiniciar pelota
    function resetBall(){
      ball.x = canvas.width/2;
      ball.y = canvas.height/2;
      ball.velocityX = -ball.velocityX;
      ball.speed = 5;
    }

    // Actualizar posiciones
    function update(){
      ball.x += ball.velocityX;
      ball.y += ball.velocityY;

      // IA computadora (sigue la pelota)
      computer.y += (ball.y - (computer.y + computer.height/2)) * 0.09;

      // Rebote superior e inferior
      if(ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0){
        ball.velocityY = -ball.velocityY;
      }

      // Verificar colisiones
      let playerOrComputer = (ball.x < canvas.width/2) ? player : computer;
      if(collision(ball, playerOrComputer)){
        let collidePoint = ball.y - (playerOrComputer.y + playerOrComputer.height/2);
        collidePoint = collidePoint / (playerOrComputer.height/2);

        let angleRad = collidePoint * (Math.PI/4);
        let direction = (ball.x < canvas.width/2) ? 1 : -1;
        ball.velocityX = direction * ball.speed * Math.cos(angleRad);
        ball.velocityY = ball.speed * Math.sin(angleRad);

        ball.speed += 0.5;
      }

      // Actualizar marcador
      if(ball.x - ball.radius < 0){
        computer.score++;
        resetBall();
      }else if(ball.x + ball.radius > canvas.width){
        player.score++;
        resetBall();
      }
    }

    // Renderizar juego
    function render(){
      drawRect(0,0,canvas.width,canvas.height,"black");
      drawText(player.score,canvas.width/4,canvas.height/5,"white");
      drawText(computer.score,3*canvas.width/4,canvas.height/5,"white");
      drawRect(player.x,player.y,player.width,player.height,player.color);
      drawRect(computer.x,computer.y,computer.width,computer.height,computer.color);
      drawCircle(ball.x,ball.y,ball.radius,ball.color);
    }

    // Loop principal
    function game(){
      update();
      render();
    }

    setInterval(game, 1000/60);
  </script>
</body>
</html>